# 桌面宠物项目

目前考虑决定使用Godot开发一个桌面宠物，然后通过Http Node与其他软件工程课上的其他组件结合到一起。但是最终目的还是要将此项目脱离软件工程开发项目，作为一个独立的项目存在。

实现桌面宠物大致有两条路径：

1. 大窗口整体透明，这样sprite可以在整个桌面上自由移动，实现起来相对更加容易一些。但是这样做的难点在于要控制鼠标穿透以及焦点控制，难度会比较大。

2. 小窗口透明。这种做法鼠标穿透和焦点控制处理起来就比较简单了，整体的性能开销也要更低一些。这种实现方案的难点在于需要控制窗口的移动等。

目前的决策是采用第二种方案。

# Todo list
接下来先一步步的把框架搭建起来，然后逐步完善桌面宠物的动画、互动等内容。
## 
1. 首先把项目设置调整好。窗口透明化，小窗口设置等内容。

另一个问题，我的桌面宠物打开之后，它会在下面的导航栏中出现一个窗口。我希望它给放在小窗口那里。


## 2. 第二个是明确sprite的位置、窗口位置、以及桌面窗口位置之间的关系。

鼠标的global position，游戏窗口位置的关系？

可以明确的一点是游戏世界的global position实际上是与游戏的窗口互相联系的。也就说，即使鼠标的位置相同、游戏的窗口位置不同也会导致鼠标在游戏世界当中的位置不同。

实际上我并不需要让sprite等内容在游戏世界当中进行运动，我只需要移动界面就可以了不是吗？

如何通过脚本实现移动窗口？通过获取DisplayServer，调用window set position 来控制窗口的位置。


## 3. 完成初步的交互功能。

通过鼠标拖动来实现窗口的移动。如何实现呢？
先不管鼠标点击的事件，直接跟着鼠标位置动就行了
现在跟着鼠标拖动的功能也实现了。但是问题在于，窗口太大的话，点击透明的部分也能拖动宠物。窗口太小，宠物就不能做出较大的动作。这种做法是由于宠物通过animatedsprite2d方式实现的。另一种方式是用texture2d的方式实现的，这种方式可以不对透明部分的点击进行响应。虽然更好一些，但是动画的实现就比较困难了。这也是一种问题。

目前的初步想法就是用animatedsprite2d来完成，另外还可以采用skeleton2d的方式来进行实现。


# 桌面宠物项目

目前考虑决定使用Godot开发一个桌面宠物，然后通过Http Node与其他软件工程课上的其他组件结合到一起。但是最终目的还是要将此项目脱离软件工程开发项目，作为一个独立的项目存在。

实现桌面宠物大致有两条路径：

1. 大窗口整体透明，这样sprite可以在整个桌面上自由移动，实现起来相对更加容易一些。但是这样做的难点在于要控制鼠标穿透以及焦点控制，难度会比较大。

2. 小窗口透明。这种做法鼠标穿透和焦点控制处理起来就比较简单了，整体的性能开销也要更低一些。这种实现方案的难点在于需要控制窗口的移动等。

目前的决策是采用第二种方案。

# Todo list
接下来先一步步的把框架搭建起来，然后逐步完善桌面宠物的动画、互动等内容。
## 
1. 首先把项目设置调整好。窗口透明化，小窗口设置等内容。

另一个问题，我的桌面宠物打开之后，它会在下面的导航栏中出现一个窗口。我希望它给放在小窗口那里。应该怎么做呢



## 2. 第二个是明确sprite的位置、窗口位置、以及桌面窗口位置之间的关系。

鼠标的global position，游戏窗口位置的关系？

可以明确的一点是游戏世界的global position实际上是与游戏的窗口互相联系的。也就说，即使鼠标的位置相同、游戏的窗口位置不同也会导致鼠标在游戏世界当中的位置不同。

实际上我并不需要让sprite等内容在游戏世界当中进行运动，我只需要移动界面就可以了不是吗？

如何通过脚本实现移动窗口？通过获取DisplayServer，调用window set position 来控制窗口的位置。


## 3. 完成初步的交互功能。

通过鼠标拖动来实现窗口的移动。如何实现呢？
先不管鼠标点击的事件，直接跟着鼠标位置动就行了
现在跟着鼠标拖动的功能也实现了。但是问题在于，窗口太大的话，点击透明的部分也能拖动宠物。窗口太小，宠物就不能做出较大的动作。这种做法是由于宠物通过animatedsprite2d方式实现的。另一种方式是用texture2d的方式实现的，这种方式可以不对透明部分的点击进行响应。虽然更好一些，但是动画的实现就比较困难了。这也是一种问题。

目前的初步想法就是用animatedsprite2d来完成，另外还可以采用skeleton2d的方式来进行实现。

